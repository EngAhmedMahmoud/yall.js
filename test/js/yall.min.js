var yall=function(){"use strict";return function(e){var n=(e=e||{}).lazyClass||"lazy",t=e.lazyBackgroundClass||"lazy-bg",o="idleLoadTimeout"in e?e.idleLoadTimeout:200,r=e.observeChanges||!1,i=e.events||{},a=e.noPolyfill||!1,s=window,c="requestIdleCallback",d="IntersectionObserver",u=d in s&&d+"Entry"in s,l=/baidu|(?:google|bing|yandex|duckduck)bot/i.test(navigator.userAgent),v=["srcset","src","poster"],f=[],queryDOM=function(e,o){return f.slice.call((o||document).querySelectorAll(e||"img."+n+",video."+n+",iframe."+n+",."+t))},yallLoad=function(n){var o=n.parentNode;"PICTURE"==o.nodeName&&yallApplyFn(queryDOM("source",o),yallFlipDataAttrs),"VIDEO"==n.nodeName&&yallApplyFn(queryDOM("source",n),yallFlipDataAttrs),yallFlipDataAttrs(n);var r=n.classList;r.contains(t)&&(r.remove(t),r.add(e.lazyBackgroundLoaded||"lazy-bg-loaded"))},yallBindEvents=function(e){for(var n in i)e.addEventListener(n,i[n].listener||i[n],i[n].options||void 0)},yallFlipDataAttrs=function(e){for(var t in v)v[t]in e.dataset&&(e.setAttribute(v[t],e.dataset[v[t]]),"SOURCE"===e.nodeName&&e.parentNode.autoplay&&(e.parentNode.load(),e.parentNode.classList.remove(n)),e.classList.remove(n))},yallApplyFn=function(e,n){for(var t=0;t<e.length;t++)s[d]&&n instanceof s[d]?n.observe(e[t]):n(e[t])},yallIntersectionObserve=function(e){if(e.isIntersecting||e.intersectionRatio){var n=e.target;c in s&&o?s[c]((function(){yallLoad(n)}),{timeout:o}):yallLoad(n),g.unobserve(n),(b=b.filter((function(e){return e!=n}))).length||r||g.disconnect()}},yallMutationObserve=function(e){b.indexOf(e)<0&&(b.push(e),yallBindEvents(e),u&&!l?g.observe(e):(a||l)&&yallApplyFn(b,yallLoad))},b=queryDOM();if(u&&!l){var g=new s[d]((function(e){yallApplyFn(e,yallIntersectionObserve)}),{rootMargin:("threshold"in e?e.threshold:200)+"px 0%"});yallApplyFn(b,yallBindEvents),yallApplyFn(b,g),r&&yallApplyFn(queryDOM(e.observeRootSelector||"body"),(function(n){new MutationObserver((function(){yallApplyFn(queryDOM(),yallMutationObserve)})).observe(n,e.mutationObserverOptions||{childList:!0,subtree:!0})}))}else(a||l)&&(yallApplyFn(b,yallBindEvents),yallApplyFn(b,yallLoad))}}();
